name: MUD Command Handler

on:
  issue_comment:
    types: [created]

jobs:
  mud:
    if: github.event.issue.number == 1
    runs-on: ubuntu-latest
    permissions:
      issues: write
      pull-requests: write

    steps:
      - uses: actions/checkout@v4

      - name: Extract comment
        id: extract
        run: |
          echo "COMMENT=${{ github.event.comment.body }}" >> $GITHUB_ENV

      - name: Respond
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          COMMENT_ID: ${{ github.event.comment.id }}
        run: |
          COMMENT="$COMMENT"
          echo "Received: $COMMENT"

          if [ "$COMMENT" = "ì¿¡ì¥ ë¶„ì„" ]; then
            MSG="ğŸ•µï¸ êµ­ì¥ ë¶„ì„ì„ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤..."
          elif [ "$COMMENT" = "ë¯¸ì¿¡ ë¶„ì„" ]; then
            MSG="ğŸ›°ï¸ ë¯¸ì¿¡ì¥ ë¶„ì„ì„ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤..."
          elif [ "$COMMENT" = "ìƒíƒœ" ]; then
            MSG="ğŸ“¦ ìƒíƒœ ì •ë³´ë¥¼ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤..."
          else
            MSG="â“ ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì…ë‹ˆë‹¤: $COMMENT"
          fi

          gh api \
            --method PATCH \
            /repos/${{ github.repository }}/issues/comments/${COMMENT_ID} \
            -f body="$MSG"
